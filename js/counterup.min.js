const speed = 200; // Adjusted speed for smoother animations across both small and large numbers

// Function to animate the count
function animateCounter(count) {
    const target = Number(count.getAttribute("data-target"));
    const counter = Number(count.innerText);
    const inc = Math.max(target / speed, 1);

    function update() {
        const currentCounter = Number(count.innerText);
        if (currentCounter < target) {
            count.innerText = Math.ceil(currentCounter + inc);
            setTimeout(update, 15); // Delay can be adjusted for smoothness
        } else {
            count.innerText = target; // Ensure final number is exactly the target
        }
    }
    update();
}

// Initialize function to animate counters only when they are visible on the screen
function initAnimateCounters() {
    const counts = document.querySelectorAll(".count");

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounter(entry.target);
                observer.unobserve(entry.target); // Stop observing after animation starts
            }
        });
    }, { threshold: 0.5 }); // Adjust threshold if necessary

    // Observe each count element
    counts.forEach(count => observer.observe(count));
}

// Call the init function
initAnimateCounters();
